/*
Auto-generated by: https://github.com/pmndrs/gltfjsx
Command: npx gltfjsx@6.2.16 hobbies-area.glb 
*/

import React, { useRef } from 'react'
import { useGLTF } from '@react-three/drei'
import { RigidBody } from '@react-three/rapier'
import MatcapManager from 'src/MatcapManager.js'

export default function HobbiesArea(props) {
  const { nodes } = useGLTF('./models/hobbies-area.glb')
  const matcapManager = new MatcapManager()

  return <>
    <group {...props} dispose={null}>
      {/**
       * Add a mesh for each mesh in the nodes array
       */}
      {Object.entries(nodes).map(([key, mesh_obj]) => (
          mesh_obj.isObject3D && mesh_obj.type === "Mesh" && (
              <mesh key={key}
                    geometry={mesh_obj.geometry}
                    position={[mesh_obj.position.x, mesh_obj.position.y, mesh_obj.position.z]} 
                    rotation={[mesh_obj.rotation._x, mesh_obj.rotation._y, mesh_obj.rotation._z]} 
                    scale={[mesh_obj.scale.x, mesh_obj.scale.y, mesh_obj.scale.z]}>
                  
                  {/* 
                      TODO Change all the logical names of the materials to their png file name counterpart
                      TODO It would be more efficent to load all the textures at once and then assign them to the materials here.
                  */}
                  <meshMatcapMaterial matcap={matcapManager.getMatcapByName(mesh_obj.material.name)} />
              
              </mesh>
          )
      ))}
    </group>
  </>
}

useGLTF.preload('./models/hobbies-area.glb')
